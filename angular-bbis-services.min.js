angular.module("bbis.api",[]).factory("BbisApi",["QueryService","UserService","CountryService","CodeTableService","ImageService","DonationService",function(n,t,i,r,u,f){return{QueryService:n,UserService:t,CountryService:i,CodeTableService:r,ImageService:u,DonationService:f}}]).factory("QueryService",["$http",function(n){var t=function(n){var t;typeof n=="string"?t=n:typeof n=="object"&&(t=n.url);t=t||BLACKBAUD.api.pageInformation.rootPath;this.baseUrl=t+"WebApi"};return t.prototype={getResults:function(t,i){var f,u,e,o,r,s=this.baseUrl+"/Query/"+t;if(i){for(r="",u=0;u<i.length;u++)e=i[u],f=e.columnName,o=e.value,f&&o&&(r.length>0&&(r+="&"),r+=encodeURIComponent(f)+"="+encodeURIComponent(o));r.length>0&&(s+="?"+r)}return n.get(s).then(function(n){return n.data})},getResultsAsObjects:function(n,t){return this.getResults(n,t).then(function(n){var t=[],i=n.Fields,r=n.Rows;return angular.forEach(r,function(n){for(var u={},r=0,f=n.Values.length;r<f;r++)u[i[r].Caption]=n.Values[r];t.push(u)}),t})}},t}]).factory("UserService",["$http","filterFilter",function(n,t){var i=function(n){var t;typeof n=="string"?t=n:typeof n=="object"&&(t=n.url);t=t||BLACKBAUD.api.pageInformation.rootPath;this.baseUrl=t+"WebApi"};return i.prototype={getProfile:function(){return n.get(this.baseUrl+"/User").then(function(n){return n.data})},getDonorProfile:function(){return this.getProfile().then(function(n){var i={Title:n.Title,FirstName:n.FirstName,LastName:n.LastName,Phone:n.Phone,Address:{}},u,r;return n.EmailAddresses&&n.EmailAddresses.length&&(u=t(n.EmailAddresses,{IsPrimary:!0})[0],i.EmailAddress=u.EmailAddress),n.Addresses&&n.Addresses.length&&(r=t(n.Addresses,{IsPrimary:!0})[0],i.Address.StreetAddress=r.StreetAddress,i.Address.City=r.City,i.Address.State=r.State,i.Address.PostalCode=r.PostalCode,i.Address.Country=r.Country||"United States"),i})}},i}]).factory("CountryService",["$http",function(n){var t=function(n){var t;typeof n=="string"?t=n:typeof n=="object"&&(t=n.url);t=t||BLACKBAUD.api.pageInformation.rootPath;this.baseUrl=t+"WebApi"};return t.prototype={getCountries:function(){return n.get(this.baseUrl+"/Country").then(function(n){return n.data})},getStates:function(t){var i=this.baseUrl+"/Country/"+t+"/State";return n.get(i).then(function(n){return n.data})},getAddressCaptions:function(t){var i=this.baseUrl+"/Country/"+t+"/AddressCaptions";return n.get(i).then(function(n){return n.data})}},t}]).factory("CodeTableService",["$http",function(n){var t=function(n){var t;typeof n=="string"?t=n:typeof n=="object"&&(t=n.url);t=t||BLACKBAUD.api.pageInformation.rootPath;this.baseUrl=t+"WebApi"};return t.prototype={getEntries:function(t){var i=this.baseUrl+"/CodeTable/"+t;return n.get(i).then(function(n){return n.data})}},t}]).factory("ImageService",["$http",function(n){var t=function(n){var t;typeof n=="string"?t=n:typeof n=="object"&&(t=n.url);t=t||BLACKBAUD.api.pageInformation.rootPath;this.baseUrl=t+"WebApi"};return t.prototype={getImagesByFolderGUID:function(t){var i=this.baseUrl+"/Images?FolderGUID="+encodeURIComponent(t);return n.get(i).then(function(n){return n.data})},getImagesByTag:function(t){var i=this.baseUrl+"/Images?Tag="+encodeURIComponent(t);return n.get(i).then(function(n){return n.data})},getImagesByFolder:function(t){var i=this.baseUrl+"/Images/"+encodeURIComponent(t);return n.get(i).then(function(n){return n.data})}},t}]).factory("DonationService",["$http",function(n){var t=function(n,t){var i;typeof t=="string"?i=t:typeof t=="object"&&(i=t.url);i=i||BLACKBAUD.api.pageInformation.rootPath;this.contextId=n;this.baseUrl=i+"WebApi/"+this.contextId+"/Donation"};return t.prototype={createDonation:function(t){var i=this.baseUrl+"/Create";return n.post(i,t).then(function(n){var t=n.data;return t.BBSPCheckoutUri?location.href=t.BBSPCheckoutUri:t.PaymentPageUri&&(location.href=t.PaymentPageUri),n.data})},getDonation:function(t){var i=this.baseUrl+"/"+t;return n.get(i).then(function(n){return n.data})},completeBBSPDonation:function(t){var i=this.baseUrl+"/"+t+"/CompleteBBSPDonation";return n.post(i).then(function(n){return n.data})},getDonationConfirmationHtml:function(t){var i=this.baseUrl+"/"+t+"/ConfirmationHtml";return n.get(i,{responseType:"text/plain"}).then(function(n){var t=n.data;return t.replace(/\\n/g,"").replace(/\\t/g,"").replace(/\\/g,"").substring(1,t.length-1)})}},t}]);
//# sourceMappingURL=angular-bbis-services.min.js.map
